(window.webpackJsonp=window.webpackJsonp||[]).push([["main"],{161:function(t,e,s){t.exports=s.p+"assets/img/loading.b11c270.gif"},162:function(t,e,s){"use strict";var a=s(27);s.n(a).a},165:function(t,e,s){},166:function(t,e,s){"use strict";s.r(e);var a=s(19),i=s.n(a),n=s(76),r=s.n(n),c=s(77),o=s.n(c),u=s(1),l=s.n(u),v=s(78),d=s.n(v),h=s(9),p=s.n(h),f=s(45),_=s.n(f),w=s(5),m=s.n(w),g=s(46),C=s.n(g),T=s(18),k=s.n(T),x=window.location.search;console.log("当前 url query 参数:",k.a.parse(x));for(var y=k.a.parse(x),R=y.forceSubmit,b=y.stuId,P=y.stuCouId,D=y.packageId,A=y.liveId,I=y.packageSource,S=y.packageAttr,q=y.releasedPageInfos,L=y.isPlayBack,M=y.classId,B=y.classTestId,$=y.educationStage,E=y.teamId,U=y.nonce,F=y.chs,N=q&&JSON.parse(q)||[],H=[],j=[],W=0;W<N.length;W++){var J=N[W];for(var O in J)H.push(J[O][0]),j.push(J[O][1])}var G={forceSubmit:R,stuId:b,stuCouId:P,packageId:D,liveId:A,packageSource:I,packageAttr:S,releasedPageInfos:q,isPlayBack:L,classId:M,classTestId:B,srcTypes:H.join(","),testIds:j.join(","),educationStage:$,teamId:E,nonce:U,chs:F};console.log("解析完成的 query 参数:",G);var X=G,Y=s(79),z=s.n(Y).a.create({baseURL:"//live.xueersi.com/science/Tutorship/",transformRequest:[function(t){return k.a.stringify(t)}]}),K=function(t){return new m.a(function(e,s){t.then(function(t){200===t.status?e(t.data):s(new Error("API 接口请求错误！ Code: "+t.status))}).catch(function(t){return s(t)})})},Q=function(t){return K(z.get("/getStuTestResult",{params:t}))},V=function(t){return K(z.get("/teamStatistics",{params:t}))},Z=function(t){return K(z.get("/top15List",{params:t}))},tt=s(47),et=s.n(tt),st=function(t){t.style.transition="transform 0.15s linear",t.style.webkitTransition="transform 0.15s linear"},at=function(t){t.style.transition="none",t.style.webkitTransition="none"},it=function(t,e){t.style.transform="translate3d(".concat(e,", 0, 0)"),t.style.webkitTransform="translate3d(".concat(e,", 0, 0)")};var nt=s(48),rt=s.n(nt),ct={wrong:{title:"全部错误",textAlign:"right",line:{start:[7.76,.7],end:[9.92,.7]}},partRight:{title:"部分正确",textAlign:"right",line:{start:[7.76,2],end:[9.92,2]}},right:{title:"全部正确",textAlign:"left",line:{start:[3.76,1.4],end:[1.6,1.4]}}},ot={right:"#28B3AC",partRight:"#FFBB67",wrong:"#FF7878"},ut=function(t,e,s,a,i){var n=.12*i,r=ct[a].line.start[0]*i,c=ct[a].line.start[1]*i;t.save(),t.fillStyle=e,t.arc(r,c,n,0,2*Math.PI),rt()(t).call(t),t.restore();var o=ct[a].line.end[0]*i,u=ct[a].line.end[1]*i,l=ct[a].title,v="0%";v=1*s==1?"100%":1*s?Math.round(100*s)+"%":"0%",t.save(),t.strokeStyle=e,t.fillStyle=e,t.lineWidth=.04*i,t.textAlign=ct[a].textAlign,t.font=.3*i+"px Arial",t.beginPath(),t.lineTo(r,c),t.lineTo(o,u),t.stroke(),t.fillText(v,o,u-.13*i),t.fillText(l,o,u+.35*i),t.restore()};var lt={data:function(){return{visible:!1,message:"加载中，请稍后..."}},methods:{open:function(){this.visible=!0},close:function(){this.visible=!0,this.$el.parentNode.removeChild(this.$el),this.$destroy(!0)}}},vt=(s(162),s(28)),dt=Object(vt.a)(lt,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"loading"},[e("img",{staticClass:"img",attrs:{src:s(161)}}),this._v(" "),this._m(0),this._v(" "),e("div",{staticClass:"meta"},[this._v(this._s(this.message))])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bar"},[e("div",{staticClass:"percent"})])}],!1,null,"e7e97142",null).exports,ht=i.a.extend(dt),pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new m.a(function(){var e=p()(l.a.mark(function e(s){var a,i,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new ht({data:t}),i=t.requestList,n=void 0===i?[]:i,a.$mount(),document.body.appendChild(a.$el),a.open(),e.next=7,r=n,m.a.all(r);case 7:a.close(),s();case 9:case"end":return e.stop()}var r},e)}));return function(t){return e.apply(this,arguments)}}())},ft=!!(1*X.forceSubmit),_t=!!(1*X.isPlayBack),wt=function(t){return new m.a(function(e){return _()(e,t)})},mt={data:function(){return{var_initReady:!1,var_isForceSubmit:ft,var_isPlayBack:_t,var_teamAnsweredPieData:null,var_teamTop15ListData:{},var_studentAnsweredResultData:{},var_chartsData:null,var_currentPointIndex:0,var_requestTeamPieDataTimes:0,var_requestTeamTop15Times:0,var_maxRequestTimes:15,var_teacherHasTakeUp:!1}},computed:{getter_isShowResultPage:function(){return this.var_studentAnsweredResultData&&this.var_teamAnsweredPieData},getter_resutlPageTypeData:function(){var t=this.var_studentAnsweredResultData,e=t.gold,s="",a="";switch(t.type){case 0:s="w",a="很遗憾答错了，没有获得金币哟！";break;case 1:s="r",a="恭喜你答对了，获得".concat(e,"个金币！");break;case 2:s="p",a="部分正确，获得".concat(e,"个金币！")}return{backgroundClass:s,resultText:a}},getter_resultBackgroundClass:function(){return this.getter_resutlPageTypeData.backgroundClass},getter_resultPageText:function(){return this.getter_resutlPageTypeData.resultText},getter_studentAnswerList:function(){return this.var_studentAnsweredResultData.answerLists||[]},getter_teamGroupTop15Data:function(){return this.var_teamTop15ListData?this.var_teamTop15ListData.teamRank:[]},getter_teamClassTop15Data:function(){return this.var_teamTop15ListData?this.var_teamTop15ListData.classRank:[]}},created:function(){window._fn_({fontSize:100,width:1334})},mounted:function(){var t=p()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return window.__CLIENT_SUBMIT__=d()(e=this.handleTeacherTackUp).call(e,this),"#hasTakeUp"===window.location.hash&&(this.var_teacherHasTakeUp=!0),t.next=4,this.initResultPage();case 4:s={methodName:"resultPageLoaded"},window.webkit&&window.webkit.messageHandlers.xesApp?window.webkit.messageHandlers.xesApp.postMessage(C()(s)):window.xesApp&&window.xesApp[s.methodName](C()(s)),window.refreshRem&&window.refreshRem();case 6:case"end":return t.stop()}var s},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{initResultPage:function(){var t=p()(l.a.mark(function t(){var e=this;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initSwiper();case 2:return t.next=4,pt({requestList:[this.requestAllResultPageData()]});case 4:this.var_initReady=!0,o()(function(){++e.var_requestTeamPieDataTimes<e.var_maxRequestTimes&&e.requestTeamAnsweredPieData(),(e.var_isForceSubmit||e.var_teacherHasTakeUp)&&++e.var_requestTeamTop15Times<e.var_maxRequestTimes&&e.requestStudentAnwseredResultData()},8e3);case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),requestAllResultPageData:function(){var t=this.var_isForceSubmit||this.var_teacherHasTakeUp||this.var_isPlayBack;return m.a.all([this.requestStudentAnwseredResultData(),this.requestTeamAnsweredPieData(),t?this.requestTeamTop15ListData():m.a.resolve()])},requestStudentAnwseredResultData:function(){var t=p()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(X);case 2:e=t.sent,console.log("学生作答结果和答案数据 ===>",e.data),this.var_studentAnsweredResultData=e.data;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),requestTeamAnsweredPieData:function(){var t=p()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(X);case 2:e=t.sent,console.log("组内答题情况饼图数据 ===>",e.data),this.initChartsForPie(e.data);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),requestTeamTop15ListData:function(){var t=p()(l.a.mark(function t(){var e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(X);case 2:e=t.sent,console.log("战队排名数据 ===>",e.data),this.var_teamTop15ListData=e.data;case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),initSwiper:function(){var t=this;return new m.a(function(e){_()(function(){var s,a,i,n,r,c,o,u,l,v,d,h;s=t.$refs.swiperRef,a=1214,i=function(e){return t.var_currentPointIndex=e},n=s.children[0],r=n.children.length,c=0,o=0,l=!1,v=0,d=0,h=0,it(n,-(u=0)*a/100+"rem"),s.addEventListener("touchstart",function(t){c=t.touches[0].pageX,o=t.touches[0].pageY,h=et()()}),s.addEventListener("touchmove",function(t){var e=t.touches[0],s=e.pageX,i=e.pageY;if(v=s-c,d=i-o,Math.abs(v)-Math.abs(d)<10)return!1;t.preventDefault(),at(n);var h=-u*a+v;v>0&&0===u&&(h=0),v<0&&u===r-1&&(h=(r-1)*-a),it(n,h/100+"rem"),l=!0}),s.addEventListener("touchend",function(){l&&Math.abs(v)>a/6&&et()()-h>50&&(v>0&&u--,v<0&&u++,u=Math.max(0,u),u=Math.min(u,r-1)),st(n),it(n,-u*a/100+"rem"),i&&i(u),c=o=v=d=0,l=!1}),e()},30)})},initChartsForPie:function(t){var e=t||{},s=e.totalNum,a=void 0===s?1:s,i=e.charts,n=void 0===i?[]:i,c=r()(n).call(n,function(t){return t.preset=t.value/a,t.type=1*t.type==0?"wrong":1*t.type==1?"partRight":"right",t});this.$refs.chartsRef&&function(t,e){var s=t.children[0],a=s.getContext("2d"),i=document.documentElement.clientWidth/1334*100*2,n=s.width=11.94*i,r=s.height=3*i,c=n/2,o=r/2,u=.6*i,l=1.38*i,v=3*Math.PI/2,d=v,h="#fff";a.clearRect(0,0,n,r);for(var p=0;p<e.length;p++)d=v+2*Math.PI*e[p].preset,h=ot[e[p].type],a.save(),a.fillStyle=h,a.beginPath(),a.arc(c,o,l,d,v,!0),a.arc(c,o,u,v,d),a.closePath(),rt()(a).call(a),a.restore(),v=d,ut(a,h,e[p].preset,e[p].type,i)}(this.$refs.chartsRef,c)},handleTeacherTackUp:function(){var t=p()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.var_teacherHasTakeUp=!0,window.location.hash="#hasTakeUp",this.var_initReady){t.next=4;break}return t.abrupt("return",this.requestAllResultPageData());case 4:return t.next=6,pt({message:"老师正在收卷，请稍后...",requestList:[this.requestAllResultPageData(),wt(1e3)]});case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),handleCloseWebPage:function(){window.location.href="https://www.baidu.com"}}},gt=Object(vt.a)(mt,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["result-root",t.getter_resultBackgroundClass]},[s("div",{staticClass:"result-info"},[t._v(t._s(t.getter_resultPageText))]),t._v(" "),s("div",{staticClass:"close",on:{click:t.handleCloseWebPage}}),t._v(" "),s("div",{ref:"swiperRef",staticClass:"swiper"},[s("div",{staticClass:"swiper-list-group"},[s("div",{staticClass:"swiper-item"},[s("div",{staticClass:"answer-info"},[t._m(0),t._v(" "),s("div",{staticClass:"content"},t._l(t.getter_studentAnswerList,function(e,a){return s("div",{key:e.testId,staticClass:"answer-item"},[s("div",{staticClass:"i index"},[t._v(t._s(a+1))]),t._v(" "),s("div",{staticClass:"i expect"},[s("div",{staticClass:"answer-wrap"},t._l(e.rightAnswer,function(e){return s("div",{key:e},[t._v(t._s(e))])}),0)]),t._v(" "),s("div",{staticClass:"i yours"},[s("div",{staticClass:"answer-wrap"},t._l(e.stuAnswer,function(e,a){return s("div",{key:a,class:{r:1*e.right==1,w:1*e.right==0,sf:!e.answer}},[t._v("\n                    "+t._s(e.answer?e.answer:"未作答")+"\n                  ")])}),0)]),t._v(" "),s("div",{staticClass:"i result",class:{r:1*e.isRight==2,p:1*e.isRight==1,w:1*e.isRight==0}})])}),0)])]),t._v(" "),s("div",{staticClass:"swiper-item"},[s("div",{staticClass:"pie-info"},[s("div",{staticClass:"header"},[s("span",{staticClass:"icon",class:t.getter_resultBackgroundClass}),t._v("\n            组内答题情况\n          ")]),t._v(" "),s("div",{ref:"chartsRef",staticClass:"pie"},[s("canvas",{attrs:{id:"canvas"}})])])]),t._v(" "),s("div",{staticClass:"swiper-item",staticStyle:{"background-color":"rgba(0, 0, 0, 0)"}},[s("div",{staticClass:"top-info"},[s("div",{staticClass:"top-15 left",class:t.getter_resultBackgroundClass},[s("div",{staticClass:"header"},[t._v("组内前15名")]),t._v(" "),s("div",{staticClass:"list"},[t._m(1),t._v(" "),s("div",{staticClass:"list-content"},t._l(t.getter_teamGroupTop15Data,function(e,a){return s("div",{key:e.stuId,staticClass:"item"},[s("div",{staticClass:"index",class:{one:0===a,two:1===a,three:2===a}},[t._v("\n                  "+t._s(a>2?a+1:"")+"\n                  ")]),t._v(" "),s("div",{staticClass:"name",class:{own:1*e.isMe==1}},[t._v(t._s(e.stuName))]),t._v(" "),s("div",{staticClass:"status",class:{own:1*e.isMe==1}},[t._v(t._s(e.correctRate))])])}),0)])]),t._v(" "),s("div",{staticClass:"top-15 right",class:t.getter_resultBackgroundClass},[s("div",{staticClass:"header"},[t._v("班内前15名")]),t._v(" "),s("div",{staticClass:"list"},[t._m(2),t._v(" "),s("div",{staticClass:"list-content"},t._l(t.getter_teamClassTop15Data,function(e,a){return s("div",{key:e.stuId,staticClass:"item"},[s("div",{staticClass:"index",class:{one:0===a,two:1===a,three:2===a}},[t._v("\n                  "+t._s(a>2?a+1:"")+"\n                  ")]),t._v(" "),s("div",{staticClass:"name",class:{own:1*e.isMe==1}},[t._v(t._s(e.stuName))]),t._v(" "),s("div",{staticClass:"status",class:{own:1*e.isMe==1}},[t._v(t._s(e.correctRate))])])}),0)])])])])])]),t._v(" "),s("div",{staticClass:"swiper-pointer-group"},t._l(3,function(e){return s("span",{key:e,staticClass:"pointer",class:{active:t.var_currentPointIndex===e-1}})}),0)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"i index"},[this._v("题号")]),this._v(" "),e("div",{staticClass:"i expect"},[this._v("正确答案")]),this._v(" "),e("div",{staticClass:"i yours"},[this._v("你的答案")]),this._v(" "),e("div",{staticClass:"i result"},[this._v("答案情况")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"list-header"},[e("div",{staticClass:"index"},[this._v("排名")]),this._v(" "),e("div",{staticClass:"name"},[this._v("姓名")]),this._v(" "),e("div",{staticClass:"status"},[this._v("正确率")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"list-header"},[e("div",{staticClass:"index"},[this._v("排名")]),this._v(" "),e("div",{staticClass:"name"},[this._v("姓名")]),this._v(" "),e("div",{staticClass:"status"},[this._v("正确率")])])}],!1,null,null,null).exports;s(165);i.a.config.productionTip=!1,new i.a({el:"#root",render:function(t){return t(gt)}})},27:function(t,e,s){}},[[166,"manifest","vendors~main"]]]);
//# sourceMappingURL=main.a8b1b7866b4a06c76f7f.js.map